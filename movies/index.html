<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DOOSH HUB - Movies</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="../assets/logo.png" />
  <style>
    /* Ad box styling */
    #adBox {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 90vw;
      max-width: 728px;
      background-color: #374151;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      z-index: 1000;
      cursor: move;
    }
    .ad-slot { display: none; }
    .ad-slot.active { display: block; }
    #closeAd {
      position: absolute;
      top: 6px;
      right: 8px;
      background: transparent;
      border: none;
      color: white;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
    }
    @media (max-width: 640px) {
      #adBox { bottom: 1rem; right: 1rem; }
    }
  </style>
</head>
<body class="bg-gray-900 text-white font-sans">

  <!-- Header -->
  <header class="flex items-center justify-between p-4 bg-gray-800 shadow-md">
    <img src="../unnamed.png" alt="Doosh Hub Logo" class="w-12 h-12" />
    <input type="text" id="search" placeholder="Search movies..." class="w-1/2 p-2 rounded bg-gray-700 text-white placeholder-gray-400" oninput="filterMovies()" />
    
    <!-- Same dropdown -->
    <select id="themeSelect" class="bg-gray-700 text-white rounded p-2">
      <option value="anime">Anime</option>
      <option value="movies" selected>Movies</option>
      <option value="kdrama">K-Drama</option>
    </select>
  </header>

  <!-- Carousel -->
  <section class="overflow-x-auto whitespace-nowrap p-4 space-x-4" id="carousel"></section>

  <!-- Movie List -->
  <main class="grid grid-cols-1 md:grid-cols-3 gap-6 p-6" id="movieList"></main>

  <!-- Ad Box -->
  <div id="adBox">
    <button id="closeAd" aria-label="Close ad">Ã—</button>
    <div class="ad-slot active" id="ad1">
      <iframe
        src="https://www.profitableratecpm.com/n7eqkd8462?key=d1bf84aaada8c239b6538b9e4ff2781a"
        width="100%"
        height="90"
        frameborder="0"
        scrolling="no"
        allowfullscreen>
      </iframe>
    </div>
    <div class="ad-slot" id="ad2">
      <script type="text/javascript">
        atOptions = {
          'key': '38c97041ba09133421880a5339a162a8',
          'format': 'iframe',
          'height': 90,
          'width': 728,
          'params': {}
        };
      </script>
      <script src="//www.highperformanceformat.com/38c97041ba09133421880a5339a162a8/invoke.js"></script>
    </div>
  </div>

  <script>
    window.onbeforeunload = null;

    const carouselData = [
      { title: "Movie Cover 1", image: "../unnamed (3).jpg" },
      { title: "Movie Cover 2", image: "../unnamed (2).jpg" },
      { title: "Movie Cover 3", image: "../unnamed (4).jpg" },
      { title: "Movie Cover 4", image: "../unnamed (1).jpg" },
    ];

    // Movies Data
    const movieData = {
      "Do-patti-(2024)-hindi-movie": {
        title: "Do-patti-(2024)-hindi-movie",
        cover: "Do-patti-(2024)-hindi-movie.jpg",
        link: "movies/do pati.html"
      },
      "avengers-endgame": {
        title: "Avengers: Endgame (2019) Hindi Dubbed",
        cover: "../movies/avengers-endgame.jpg",
        link: "avengers-endgame.html"
      },
      "inception": {
        title: "Inception (2010) Hindi Dubbed",
        cover: "../movies/inception.jpg",
        link: "inception.html"
      },
      "joker": {
        title: "Joker (2019) Hindi Dubbed",
        cover: "../movies/joker.jpg",
        link: "joker.html"
      }
    };

    function loadCarousel() {
      const carousel = document.getElementById('carousel');
      carousel.innerHTML = '';
      carouselData.forEach(item => {
        const div = document.createElement('div');
        div.className = "inline-block w-64 h-40 bg-purple-600 rounded shadow-md text-center align-top";
        div.innerHTML = `<img src="${item.image}" alt="${item.title}" class="w-full h-full object-cover rounded" />`;
        carousel.appendChild(div);
      });
    }

    function loadMovieCards() {
      const list = document.getElementById('movieList');
      list.innerHTML = '';
      Object.values(movieData).forEach(m => {
        const card = document.createElement('a');
        card.href = m.link;
        card.className = "bg-gray-800 rounded-lg shadow hover:shadow-lg p-4 block transition hover:bg-gray-700";
        card.innerHTML = `<img src="${m.cover}" alt="${m.title}" class="w-full h-40 object-cover rounded mb-2"><h2 class="text-xl font-bold text-center">${m.title}</h2>`;
        list.appendChild(card);
      });
    }

    function filterMovies() {
      const q = document.getElementById('search').value.toLowerCase();
      document.querySelectorAll('#movieList a').forEach(card => {
        const title = card.querySelector('h2').innerText.toLowerCase();
        card.style.display = title.includes(q) ? 'block' : 'none';
      });
    }

    // Rotate ads
    let currentAd = 1;
    setInterval(() => {
      document.querySelectorAll('.ad-slot').forEach(el => el.classList.remove('active'));
      currentAd = currentAd === 1 ? 2 : 1;
      document.getElementById(`ad${currentAd}`).classList.add('active');
    }, 10000);

    // Drag ad box
    (function () {
      const box = document.getElementById('adBox');
      let offsetX, offsetY, dragging = false;
      box.addEventListener('mousedown', e => {
        dragging = true;
        offsetX = e.clientX - box.offsetLeft;
        offsetY = e.clientY - box.offsetTop;
        document.body.style.userSelect = 'none';
      });
      document.addEventListener('mousemove', e => {
        if (!dragging) return;
        box.style.left = `${e.clientX - offsetX}px`;
        box.style.top = `${e.clientY - offsetY}px`;
        box.style.bottom = 'auto';
        box.style.right = 'auto';
      });
      document.addEventListener('mouseup', () => {
        dragging = false;
        document.body.style.userSelect = '';
      });
    })();

    // Close ad box
    document.getElementById('closeAd').addEventListener('click', () => {
      document.getElementById('adBox').style.display = 'none';
    });

    // Dropdown switch pages
    document.getElementById('themeSelect').addEventListener('change', (e) => {
      const value = e.target.value;
      if (value === 'movies') {
        window.location.href = 'index.html';
      } else if (value === 'anime') {
        window.location.href = '../index.html';
      } else if (value === 'kdrama') {
        window.location.href = '../kdrama/index.html';
      }
    });

    // Initial load
    loadCarousel();
    loadMovieCards();
  </script>
</body>
</html>

