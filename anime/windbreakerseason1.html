<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wind Breaker - Season 1</title>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    html, body {
      user-select: none;
      scroll-behavior: smooth;
    }
    .video-container {
      position: relative;
      padding-top: 56.25%;
      background-color: black;
    }
    .video-container #videoPlayer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .controls {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      justify-content: center;
      gap: 10px;
      z-index: 3;
      opacity: 1;
      transition: opacity 0.5s;
    }
    .control-btn {
      background-color: rgba(0,0,0,0.6);
      color: white;
      border: none;
      padding: 8px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 16px;
    }
    .controls.hide {
      opacity: 0;
      pointer-events: none;
    }
    .theme-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: rgba(0,0,0,0.6);
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
    }
  </style>
</head>
<body class="bg-[#0b0f1a] text-white">
  <div class="max-w-5xl mx-auto px-4 py-6">
    <header class="flex flex-col sm:flex-row sm:items-center justify-between mb-6">
      <h1 class="text-3xl font-bold text-purple-400">Wind Breaker - Season 1</h1>
      <div class="flex gap-3 mt-2 sm:mt-0">
        <a href="index.2.html" class="bg-purple-700 hover:bg-purple-800 px-3 py-2 rounded text-white">‚Üê Go Back</a>
        <a href="support.html" class="bg-purple-700 hover:bg-purple-800 px-3 py-2 rounded text-white">Support Us</a>
      </div>
    </header>

    <div class="mb-4">
      <input type="text" id="searchBox" oninput="searchEpisodes()" placeholder="Search episodes..." class="w-full p-2 mb-4 bg-gray-800 text-white rounded" />
    </div>

    <div id="videoWrapper" class="video-container rounded-xl shadow-lg overflow-hidden relative">
      <div id="videoPlayer"></div>
      <div class="controls" id="videoControls">
        <button class="control-btn" onclick="seek(-10)">‚è™</button>
        <button class="control-btn" onclick="togglePlayPause()">‚ñ∂Ô∏è/‚è∏Ô∏è</button>
        <button class="control-btn" onclick="seek(10)">‚è©</button>
        <button class="control-btn" onclick="playPreviousEpisode()">‚¨ÖÔ∏è</button>
        <button class="control-btn" onclick="playNextEpisode()">‚û°Ô∏è</button>
        <button class="control-btn" onclick="toggleFullscreen()">‚õ∂</button>
      </div>
      <div class="theme-toggle" onclick="toggleTheme()">üåô</div>
    </div>

    <div id="episodeList" class="mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>

    <div class="mt-6 bg-gray-800 p-4 rounded-lg">
      <h2 class="text-xl font-semibold mb-2">About Wind Breaker</h2>
      <p>
        Wind Breaker is a high-energy anime series that follows Haruka Sakura, a strong and rebellious transfer student who joins Furin High School‚Äîa school known for its fierce fighters who protect their town. As Haruka navigates intense battles and forms bonds with unlikely allies, the series blends action, heart, and powerful themes of friendship and justice.
      </p>
    </div>

    <footer class="mt-10 text-sm text-center text-gray-400">
      <p>A heartfelt thank you to the creators of <strong>Wind Breaker</strong> for bringing such an inspiring and thrilling story to life.</p>
      <p>We also extend our gratitude to <strong>Muse India</strong> for making Wind Breaker accessible to fans across the region.</p>
      <p class="mt-2">Thank you for everything!</p>
    </footer>
  </div>

  <script>
    let player;
    const episodes = [
      { title: "Episode 1", link: "ne0Y0vyjxpE" },
      { title: "Episode 2", link: "J2568cnOa1g" },
      { title: "Episode 3", link: "QOMv17IjJAU" },
      { title: "Episode 4", link: "MT7WzTJZCxg" },
      { title: "Episode 5", link: "4sRfndp1vAM" },
      { title: "Episode 6", link: "oTvQ-5BNC6w" },
      { title: "Episode 7", link: "Em5lFIz_kxU" },
      { title: "Episode 8", link: "SBaGblvd4mU" },
      { title: "Episode 9", link: "43Hj2GySjgA" },
      { title: "Episode 10", link: "TIpodnZtFP4" },
      { title: "Episode 11", link: "_L-UG_jvnM4" },
      { title: "Episode 12", link: "skAwsc6UL8A" },
      { title: "Episode 13", link: "-xUk9E2iQQY" }
    ];
    let currentEpisodeIndex = 0;

    // Ensure the YouTube API is loaded before creating the player
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('videoPlayer', {
        videoId: episodes[currentEpisodeIndex].link, // Make sure the link is correct
        playerVars: {
          autoplay: 1,
          controls: 1,
          modestbranding: 1,
          rel: 0,
          cc_load_policy: 1
        },
        events: {
          onReady: loadEpisodes,
          onStateChange: handleStateChange
        }
      });
    }

    function seek(seconds) {
      if (player && player.getCurrentTime) {
        const time = player.getCurrentTime();
        player.seekTo(time + seconds, true);
      }
    }

    function togglePlayPause() {
      const state = player.getPlayerState();
      if (state === YT.PlayerState.PLAYING) player.pauseVideo();
      else player.playVideo();
    }

    function toggleFullscreen() {
      const wrapper = document.getElementById("videoWrapper");
      if (!document.fullscreenElement) {
        wrapper.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    function playNextEpisode() {
      if (currentEpisodeIndex < episodes.length - 1) {
        currentEpisodeIndex++;
        player.loadVideoById(episodes[currentEpisodeIndex].link);
      }
    }

    function playPreviousEpisode() {
      if (currentEpisodeIndex > 0) {
        currentEpisodeIndex--;
        player.loadVideoById(episodes[currentEpisodeIndex].link);
      }
    }

    function loadEpisodes() {
      const list = document.getElementById("episodeList");
      list.innerHTML = "";
      episodes.forEach((ep, i) => {
        const btn = document.createElement("button");
        btn.className = "p-3 bg-purple-700 hover:bg-purple-800 rounded-xl shadow-md text-left";
        btn.innerHTML = `<strong>${ep.title}</strong>`;
        btn.onclick = () => {
          currentEpisodeIndex = i;
          player.loadVideoById(ep.link);
        };
        list.appendChild(btn);
      });
    }

    function searchEpisodes() {
      const value = document.getElementById("searchBox").value.toLowerCase();
      const list = document.getElementById("episodeList");
      list.innerHTML = "";
      episodes.filter(ep => ep.title.toLowerCase().includes(value)).forEach((ep, i) => {
        const btn = document.createElement("button");
        btn.className = "p-3 bg-purple-700 hover:bg-purple-800 rounded-xl shadow-md text-left";
        btn.innerHTML = `<strong>${ep.title}</strong>`;
        btn.onclick = () => {
          currentEpisodeIndex = i;
          player.loadVideoById(ep.link);
        };
        list.appendChild(btn);
      });
    }

    function handleStateChange(event) {
      const controls = document.getElementById("videoControls");
      if (event.data === YT.PlayerState.PLAYING) {
        startControlAutoHide();
      } else {
        clearTimeout(hideTimeout);
        controls.classList.remove("hide");
      }

      if (event.data === YT.PlayerState.ENDED) {
        playNextEpisode();
      }
    }

    let hideTimeout;
    function startControlAutoHide() {
      const controls = document.getElementById("videoControls");
      controls.classList.remove("hide");
      clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => {
        controls.classList.add("hide");
      }, 4000);
    }

    document.addEventListener("mousemove", () => {
      const controls = document.getElementById("videoControls");
      controls.classList.remove("hide");
      clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => {
        controls.classList.add("hide");
      }, 4000);
    });

    function toggleTheme() {
      const currentTheme = document.body.classList.contains('bg-[#0b0f1a]') ? 'dark' : 'light';
      if (currentTheme === 'dark') {
        document.body.classList.remove('bg-[#0b0f1a]', 'text-white');
        document.body.classList.add('bg-white', 'text-black');
        document.querySelector('.theme-toggle').innerText = 'üåû';
      } else {
        document.body.classList.remove('bg-white', 'text-black');
        document.body.classList.add('bg-[#0b0f1a]', 'text-white');
        document.querySelector('.theme-toggle').innerText = 'üåô';
      }
    }
  </script>
</body>
</html>
